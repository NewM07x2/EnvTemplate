Waiting for PostgreSQL...


db:5432 - accepting connections


PostgreSQL is ready!


Running migrations...


System check identified some issues:




WARNINGS:


?: (staticfiles.W004) The directory '/app/static' in the STATICFILES_DIRS setting does not exist.


Operations to perform:


Apply all migrations: admin, auth, contenttypes, debug_toolbar, django_celery_beat, sessions


Running migrations:


Traceback (most recent call last):


File "/usr/local/lib/python3.12/site-packages/django/db/backends/utils.py", line 103, in _execute


return self.cursor.execute(sql)


^^^^^^^^^^^^^^^^^^^^^^^^


psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "pg_class_relname_nsp_index"


DETAIL: Key (relname, relnamespace)=(django_migrations_id_seq, 2200) already exists.






The above exception was the direct cause of the following exception:




Traceback (most recent call last):


File "/usr/local/lib/python3.12/site-packages/django/db/migrations/recorder.py", line 78, in ensure_schema


editor.create_model(self.Migration)


File "/usr/local/lib/python3.12/site-packages/django/db/backends/base/schema.py", line 512, in create_model


self.execute(sql, params or None)


File "/usr/local/lib/python3.12/site-packages/django/db/backends/postgresql/schema.py", line 45, in execute


return super().execute(sql, params)


^^^^^^^^^^^^^^^^^^^^^^^^^^^^


File "/usr/local/lib/python3.12/site-packages/django/db/backends/base/schema.py", line 204, in execute


cursor.execute(sql, params)


File "/usr/local/lib/python3.12/site-packages/django/db/backends/utils.py", line 122, in execute


return super().execute(sql, params)


^^^^^^^^^^^^^^^^^^^^^^^^^^^^


File "/usr/local/lib/python3.12/site-packages/django/db/backends/utils.py", line 79, in execute


return self._execute_with_wrappers(


^^^^^^^^^^^^^^^^^^^^^^^^^^^^


File "/usr/local/lib/python3.12/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers


return executor(sql, params, many, context)


^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^


File "/usr/local/lib/python3.12/site-packages/django/db/backends/utils.py", line 100, in _execute


with self.db.wrap_database_errors:


^^^^^^^^^^^^^^^^^^^^^^^^^^^^


File "/usr/local/lib/python3.12/site-packages/django/db/utils.py", line 91, in __exit__



# 既存のボリュームを削除してクリーンな状態から起動
docker-compose down -v

# 再ビルドして起動
docker-compose up -d --build

# ログを確認
docker-compose logs -f app